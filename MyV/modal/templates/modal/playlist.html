{% load static %}
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="{% static 'modal/css/playlist.css' %}">
</head>
<body>
    <div class="flex">
        <div class="contents">
            <header>
                <div class="header-contents">
                    <img class="logo" src="{% static 'modal/images/logo.svg' %}" onclick="location.href='{% url 'main1' %}'" />
                </div>
                <div class="mobile_btn">
                    <input type="checkbox" id="hamburger" />
                    <label for="hamburger">
                        <span></span>
                        <span></span>
                        <span></span>
                    </label>
                    <div class="sidebar">
                        <img class="user-img" src="{% static 'modal/images/modal-face.svg' %}" width="100px" />
                        <div class="modaltext">
                            <div class="user-info">
                                <p class="info1">MyV íšŒì›</p>
                                <p class="info2">{{ user.nickname }}</p>
                            </div>
                            <ul class="nav_mobile">
                                <li><a href="{% url 'howtoUse1' %}">ì‚¬ìš© ë°©ë²•</a></li>
                                <li><a href="{% url 'playlistPage' %}">í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</a></li>
                                <li><a href="{% url 'analyze' %}">ë³´ì»¬ ë¶„ì„</a></li>
                                <li><a href="{% url 'team' %}">íŒ€ ì†Œê°œ</a></li>
                                <li><a href="{% url 'account_logout' %}">ë¡œê·¸ì•„ì›ƒ</a></li>
                            </ul>
                            <div class="wave">
                                <img src= "{% static 'modal/images/wave.png' %}" height="223px" />
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <main>
                <div class="title">í”Œë ˆì´ë¦¬ìŠ¤íŠ¸</div>
                <div class="playlist-form">
                    <form id="playlistForm" method="post" action="{% url 'delete_playlist' %}" onsubmit="return confirmDelete()">
                        {% csrf_token %}
                        <div class="playlist-text">
                            <span>{{ user.nickname }}</span> ë‹˜ì„ ìœ„í•œ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.ğŸµ
                        </div>
                        <div class="playlist-text1">
                            <p> ê³¡ì„ ëˆ„ë¥´ë©´ 
                              <img class="sp" src="{% static 'modal/images/spotify.png' %}" />
                              ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
                        </div>
                        
                        <div class="playlist-contents">
                            {% if page_obj %}
                                <button type="submit">ì‚­ì œ</button>
                                <div class="retry" onclick="location.href='{% url 'main3' %}'">ë‹¤ì‹œ ì¶”ì²œ ë°›ê¸°</div>
                                {% for playlist in page_obj %}
                                    <div class="playlist-content" onclick="location.href='{{ playlist.song_url }}'">
                                        <hr />
                                        <input type="checkbox" name="playlist_ids" value="{{ playlist.id }}" onclick="event.stopPropagation();" style="
                                        margin-left: 345px;
                                        margin-top: 12px;
                                        transform: scale(1.5);
                                    ">
                                        <span class="album"><img src="{{ playlist.img }}" alt="ì•¨ë²” ì»¤ë²„" width="80px" /></span>
                                        <div class="song-info">
                                            <span class="song-title">{{ playlist.title }}</span><br />
                                            <span class="singer">{{ playlist.artist }}</span>
                                        </div>                               
                                    </div>
                                {% endfor %}
                            {% else %}
                                <p style="padding-left: 130px; padding-bottom: 10px;">ì„ íƒëœ ì•¨ë²”ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                            {% endif %}
                            <hr />
                        </div>
                    </form>
                    <div class="pagination">
                        <span class="previous">
                            {% if page_obj.has_previous %}
                                <a href="?page=1">&laquo; ì²˜ìŒ</a>
                                <a href="?page={{ page_obj.previous_page_number }}">ì´ì „</a>
                            {% endif %}
                        </span>
                        <span class="current">
                            í˜ì´ì§€ {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
                        </span>
                        <span class="next">
                            {% if page_obj.has_next %}
                                <a href="?page={{ page_obj.next_page_number }}">ë‹¤ìŒ</a>
                                <a href="?page={{ page_obj.paginator.num_pages }}">ë &raquo;</a>
                            {% endif %}
                        </span>
                    </div>
                </div>
            </main>
            
        </div>
    </div>
    <script>
        function confirmDelete() {
            var checkboxes = document.querySelectorAll('input[name="playlist_ids"]:checked');
            if (checkboxes.length > 0) {
                return confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?');
            } else {
                alert('ì‚­ì œí•  ê³¡ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return false;
            }
        }
    </script>
</body>
</html>
